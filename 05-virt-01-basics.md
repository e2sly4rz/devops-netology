# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

**Ответ:**

Аппаратная виртуализация представляет собой своего рода специализированную ОС + гипервизор.
При паравиртуализации гипервизор ставится "поверх" ОС.
Виртуализация на основе ОС - это скорее возможность запуска ВМ по принципу изолированного окружения внутри ОС. Главное ограничение в данном типе от аппаратной виртуализации и паравиртуализации это использование ядра аналогичного ядру хостовой машины.

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

**Ответ:**

Условия|Организация|Описание
---|---|---
Высоконагруженная база данных, чувствительная к отказу|физические сервера|В случае использования виртуализации возможны проблемы с доступом к ресурсам + потери на саму виртуализацию
Различные web-приложения|паравиртуализация, виртуализация уровня ОС|Как правило web-приложения не сильно требовательны к ресурсам + виртуализация позволит динамично работать с масштабированием
Windows системы для использования бухгалтерским отделом|паравиртуализация|В частности Hyper-V, который позволит максимально комфортно администрировать Windows системы
Системы, выполняющие высокопроизводительные расчеты на GPU|физические сервера|Не смотря на то, что сейчас существуют инструменты прямого доступа ВМ к PCI устройствам, использование физических серверов кажется более надежным из-за отсутствия конкуренции за ресурсы

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

**Ответ:**

1. ESXi. Выбран с учетом достаточно крупной инфраструктуры, что накладывает необходимость в максимально качественной поддержке со стороны вендора. Поддержка репликации и автоматических резервных копий присутствует. Несмотря на наличие в среде Hyper-V виртуальных управляемых коммутаторов, что позволят реализовать балансировку, у ESXi есть готовый специализированный под данную задачу компонент.
2. KVM. При использовании в виде Proxmox позволит максимально быстро и комфортно развернуть небольшую виртуальную инфраструктуру.
3. Hyper-V / KVM. Выбор очевиден из-за преобладания Windows систем. В случае построения инфраструктуры с нуля - KVM. Если в организации присутствуют серверы на Windows, то их можно бесплатно переориентировать для Hyper-V установив соответствующий компонент.
4. Контейнер (Docker). Если речь идёт только про Linux, то использование контейнеров позволит буквально на любой Linux машине быстро развернуть любое рабочее окружение для тестирования ПО.

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

**Ответ:**

Основное неудобство для обслуживания гетерогенной среды это разные подходы к администрированию и возможности интеграции систем между собой.
Для минимизации неудобств/проблем в администрировании разных систем можно использовать сторонние инструменты управления (ansible) с преднастроенными шаблонами, а для резервного копирования использовать совместимые между системами методы резервирования и типы образов ВМ.

**Личное мнение:**

На текущий момент мне кажется разумным использовать пару систем виртуализации с учетом их преимуществ.

Например:
1. Hyper-V для офисных сотрудников т.к. большинство использует продукты от Microsoft
2. Proxmox для остальных систем связанных с деятельностью организации (если есть)

Возможно даже использование еще одной системы виртуализации для некритичных сервисов.

Такой подход позволит эффективнее использовать гипервизоры для разных задач, поддерживать уровень знаний IT инженеров, что также позволит минимизировать сложности перехода с одной системы на другую в случае закрытия/ухода одного из вендоров с рынка.
